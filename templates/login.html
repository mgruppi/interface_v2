{% extends "base.html" %}

{% block title %}
<div class="table-responsive" style="float:left;width:46%">
  <h4>Log In</h4>
</div>
<div class="table-responsive" style="float:left;width:45%">
  <h4>Register</h4>
</div>
{% endblock %}

{% block body %}

<script src="https://www.google.com/recaptcha/api.js?render=6LdoM7QUAAAAAK0IjEBS0I9E8Ys9jJrN8drDWY9j"></script>
<script>
  grecaptcha.ready(function() {
    grecaptcha.execute('6LdoM7QUAAAAAK0IjEBS0I9E8Ys9jJrN8drDWY9j', {action: 'homepage'}).then(function(token) {
       document.getElementById("recaptchaResponseLogin").value = token;
       document.getElementById("recaptchaResponseRegister").value = token;
    });
  });
</script>

<form action="" method="post" onsubmit="return checkForm(this, 'login');">
  <input type="hidden" name="recaptcha_response" id="recaptchaResponseLogin">
  <div class="table-responsive" style="float:left;width:45%">
    <table class="table">
      <tr>
        <td>Email*</td>
        <td><input type="text" name="email" style="width:95%"></td>
      </tr>
      <tr>
        <td>Password*</td>
        <td><input type="password" name="password" style="width:95%"></td>
      </tr>
      <tr>
        <td> </td>
        <td><input type="submit" name="login" value="Log In">&nbsp;&nbsp;&nbsp;<a href="{{ url_for('request_password_reset') }}">Reset Password</a></td>
      </tr>
    </table>
  </div>

</form>
<form action="" method="post" onsubmit="return checkForm(this, 'register');">
  <input type="hidden" name="recaptcha_response" id="recaptchaResponseRegister">
  <div class="table-responsive" style="float:left;width:45%;border-left:solid #aaaabb;padding-left:15px">
    <table class="table">
      <tr>
        <td>Name*</td>
        <td><input type="text" name="name" style="width:95%"></td>
      </tr>
      <tr>
        <td>Email*</td>
        <td><input type="text" name="email" style="width:95%"></td>
      </tr>
      <tr>
        <td>Address</td>
        <td><input type="text" name="address" style="width:95%"></td>
      </tr>
      <tr>
        <td>City</td>
        <td><input type="text" name="city" style="width:95%"></td>
      </tr>
      <tr>
        <td>Province</td>
        <td><input type="text" name="province" style="width:95%"></td>
      </tr>
      <tr>
        <td>Country</td>
        <td><input type="text" name="country" style="width:95%"></td>
      </tr>
      <tr>
        <td>Postal Code</td>
        <td><input type="text" name="postal_code" style="width:95%"></td>
      </tr>
      <tr>
        <td>Research Institution</td>
        <td><input type="text" name="institution" style="width:95%"></td>
      </tr>
      <tr>
        <td>Professional URL</td>
        <td><input type="text" name="professional_url" style="width:95%"></td>
      </tr>
      <tr>
        <td>Research Interests</td>
        <td><input type="text" name="research_interests" style="width:95%"></td>
      </tr>
      <tr>
        <td>Choose a Password*</td>
        <td><input type="password" name="password" style="width:95%"></td>
      </tr>
      <tr>
        <td>Verify Password*</td>
        <td><input type="password" name="password_confirm" style="width:95%"></td>
      </tr>

      <tr>
        <td> </td>
        <td><input type="submit" name="login" value="Register"></td>
      </tr>
    </table>
  </div>
</form>

<script>
function checkForm(form, type)
{
  if (form.name.value == "")
  {
    alert("Error: Name cannot be blank!");
    form.name.focus();
    return false;
  }
  if (form.email.value == "")
  {
    alert("Error: Email cannot be blank!");
    form.email.focus();
    return false;
  }
  if (form.password.value == "")
  {
    alert("Error: Password cannot be blank!");
    form.password.focus();
    return false;
  }
  if (type == "register" && form.password.value != form.password_confirm.value)
  {
    alert("Error: Passwords do not match!");
    form.password_confirm.focus();
    form.password_confirm.value = "";
    return false;
  }
  return true;
}
</script>
{% endblock %}
